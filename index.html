<!DOCTYPE html>
<html>

<head>
  <title>Barak Nehoran</title>
  <style>
    body {
    	  font-family: sans-serif;
    	  background-color: #111;
    	  margin: 0;
    }
    
    #header {
    	  display: flex;
    	  flex-direction: column;
    	  align-items: center;
    	  background-color: #111;
    	  color: #fff;
    	  padding: 3em;
    }
    
    #header h1 {
    	  font-size: 4em;
    	  margin: 0;
    }
    
    #header h2 {
    	  font-size: 2em;
    	  margin: 0;
        text-align: center;
    }

    #header h3 {
        margin-bottom: 20px;
    }
          
    #header img {
    	  border-radius: 50%;
    	  width: 250px;
    	  height: 250px;
    	  margin-right: 1em;
    	  object-fit: cover;
    }
    
    #nav {
    	  display: flex;
        justify-content: center;
    	  background-color: #111;
    	  color: #fff;
    	  padding: 0.5em;
    }
    
    #nav ul {
    	  display: flex;
    	  list-style: none;
    }
    
    #nav a {
    	  color: #fff;
    	  text-decoration: none;
    	  padding: 0.5em;
        margin: 0.2em;
    }
    
    #nav a:hover {
    	  background-color: #555;
    }
    
    #content {
    	  max-width: 800px;
    	  margin: 0 auto;
    	  padding: 1em;
    }
    
    #content h2 {
    	  margin-top: 0;
        text-align: center;
    }

    #content h3 {
        margin-top: 15px;
    }
     
    #content p {
    	  line-height: 1.5;
    }
    
    #content ul {
    	  list-style: none;
    	  padding: 0;
    }
    
    #content li {
    	  margin: 0.7em 0;
    }

    #content table {
      margin-left: auto; /* Auto margin to center the table horizontally */
      margin-right: auto;
    }
    
    .card {
    	  background-color: #f1f1f1;
    	  border-radius: 5px;
    	  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
    	  margin: 20px 0;
    	  padding: 20px;
    	  width: 100%;
    	  scroll-margin-top: 76px;
    }
    .card h2 {
    	  margin-bottom: 20px;
        margin-top: 5px;
    }
    .card p {
        margin-bottom: 20px;
    }
    .sticky {
    	  position: fixed;
    	  top: 0;
    	  width: 100%;
    	  z-index: 1;
    }
    
    .loader {
    	  border: 16px solid #f3f3f3; /* Light grey */
    	  border-top: 16px solid #91741A;
    	  border-radius: 50%;
    	  width: 50px;
    	  height: 50px;
    	  animation: spin 2s linear infinite;
    	  margin: auto; /* Center horizontally and vertically */
    }
    
    @keyframes spin {
    	  0% { transform: rotate(0deg); }
    	  100% { transform: rotate(360deg); }
    }

    .collapsible {
      list-style-type: none;
      margin: 0;
      padding: 0;
    }
    .collapsible li {
      border-bottom: 1px solid #ccc;
      position: relative; /* Added */
    }
    .collapsible li .collapse-section {
      display: none;
    }
    .collapsible li .collapse-section.collapsed {
      display: none;
    }
    .collapsible li .collapse-section.expanded {
      display: block;
    }
    .collapsible li .collapsible-header {
      cursor: pointer;
    }
    .collapsible li .collapsible-header:hover {
      background-color: blanchedalmond;
      /* color: white; */
      /* font-weight: bold; */
    }
    .collapsible li .collapsible-header::before {
      content: "â–¶";
      cursor: pointer;
      transition: transform 0.3s;
    }
    .collapsible li .collapsible-header.expanded::before {
      content: "â–¼"; /* Rotated state: triangle pointing down */
    }

    .container {
      display: flex;
      flex-wrap: wrap;
    }
    .column {
      flex: 1;
      padding: 20px;
      box-sizing: border-box;
    }
    @media (max-width: 350px) {
      .column {
        flex: 100%;
      }
    }
    
  </style>
  <meta charset="UTF-8">
</head>

<body>
  <div id="header">
    <h1>Barak Nehoran</h1> <br>
    <h2>PhD Candidate in Computer Science</h2>
    <h3>Research interests: quantum information, cryptography, complexity theory</h3> 
    <img src="https://lh3.googleusercontent.com/pw/ABLVV86hllQZ5DjxF6dKpJzBBTRW5vq6oT2jnZl47rpiHG1VMkCye0TMEk4F7frEgG1jkcKX251kRArblLyYp-nKGeyr0fQTaAXScwhTVnbKApC1eArKjpucYGknkRpgZJZSkBx9C-gHtUNpQnvjXpRdH41lfg=w1338-h892-s-no-gm?authuser=0" alt="Barak Image Barak Image">
  </div>
  <div id="nav">
    <ul>
      <li><a href="#about">About</a></li>
      <li><a href="#research">Research</a></li>
      <li><a href="#publications">Publications</a></li>
      <li><a href="#teaching">Teaching</a></li>
      <li><a href="#service">Service</a></li>
      <li><a href="#contact">Contact</a></li>
    </ul>
  </div>
  <div id="content">
    <!-- <div class="card" id="noise">
      <p align="center" style="font-size: 130%"> ðŸš§ <i> This webpage is currently under construction, so please forgive the noise! </i> ðŸš§ </p>
    </div> -->
    <div class="card" id="about">
      <h2>About</h2>
      <p>I am a Ph.D. candidate in theoretical computer science at Princeton University where I&rsquo;m fortunate to be co-advised by Professors <a href="https://engineering.princeton.edu/faculty/ran-raz" target="_blank" rel="noopener">Ran Raz</a> and <a href="https://mzhandry.github.io/" target="_blank" rel="noopener">Mark Zhandry</a>.</p>
      <p>My research interests lie in the areas of <strong>quantum information, cryptography, and complexity theory</strong>, and more generally at the intersections of physics, information, and computation.</p>
      <p>In the past (mainly prior to my Ph.D.), I have also done research in electrical engineering, experimental physics, machine learning, and computational neuroscience.</p>
    </div>
    <div class="card" id="research">
      <h2>Research</h2>
      My research examines the power of quantum computation and quantum information in two contexts:
      <h3>Quantum Cryptography</h3> <i>How can we use quantum states and quantum information to produce cryptographic primitives and constructions that would not be possible with only classical information? What kinds of cryptographic objects only arise out of the marriage of both the guarantees of quantum no-go theorems and the efficiency assumptions of computational complexity?</i>
      <h3>Quantum Complexity Theory</h3> <i>How are the capabilities of interacting systems affected by the presence of quantum information? Can we use the power given by quantum no-go theorems to give rise to stronger guarantees on the resources required to perform interactive computation?</i>
    </div>
    <div class="card" id="publications">
      <h2>Publications</h2>
      <ul class="collapsible" id="papers">
        <div class="loader"></div>
        <p>Loading publications... See my profile on <a href='https://scholar.google.com/citations?user=DMxcDioAAAAJ' target='_blank'>Google Scholar</a>.</p>
      </ul>
      <!-- <small>(loaded from my Semantic Scholar <a href="https://www.semanticscholar.org/author/B.-Nehoran/1926235266" target="_blank">profile</a>)</small> -->
    </div>
    <div class="card" id="talks">
      <h2>Selected Talks</h2>
      <ul>
        <li>
          <h3>A Computational Separation Between Quantum No-Cloning and No-Telegraphing</h3>
          Contributed talk at <a href="http://itcs-conf.org/" target="_blank">ITCS 2024</a>
          <div class="video-container" style="position: relative; width: 100%; height: 100%; padding-bottom: 56.25%;">
            <iframe style="position: absolute; width: 100%; height: 100%;" src="https://www.youtube.com/embed/lf-BgQYtzOk?si=bbe9hmNtDET7asLw" title="ITCS 2024: A Computational Separation Between Quantum No-cloning and No-telegraphing" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
          </div>
          <h4>Other versions of this talk:</h4>
          <a href="https://www.youtube.com/watch?v=vT__6ShiRsA" target="_blank">Cornell Theory Seminar</a> /
          <a href="https://www.youtube.com/watch?v=LHfUA-LXTlY" target="_blank">Princeton Theory Lunch</a> /
          <a href="https://www.youtube.com/watch?v=ComfHKBJJb8" target="_blank">Hon Hai Quantum Computing Research Center (Foxconn)</a> /
          <a href="https://www.youtube.com/watch?v=d4IcJR6D4wQ" target="_blank">QIP 2023</a>
        </li>
        <br>
        <li>
          <h3>Unconditionally Secure Commitments with Quantum Auxiliary Inputs</h3>
          Contributed talk at <a href="https://crypto.iacr.org/2024/" target="_blank">Crypto 2024</a>
          <div class="video-container" style="position: relative; width: 100%; height: 100%; padding-bottom: 56.25%;">
            <iframe style="position: absolute; width: 100%; height: 100%;" src="https://www.youtube.com/embed/tWA_KeGo5WQ?si=3wrHNi6DTiTcrV9l&amp;start=2341" title="ITCS 2024: A Computational Separation Between Quantum No-cloning and No-telegraphing" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
          </div>
        </li>
        <br>
        <li>
          <h3>Introduction to Quantum Information Theory</h3>
          Guest Lecture in <a href="https://www.cs.princeton.edu/courses/archive/spring22/cos585/" target="_blank"> COS 585 (Graduate Information Theory Course)</a>, Spring 2024 @ Princeton University
          <div class="video-container" style="position: relative; width: 100%; height: 100%; padding-bottom: 56.25%;">
            <iframe style="position: absolute; width: 100%; height: 100%;" src="https://www.youtube.com/embed/vJ0C8ghuxNM?si=S0hmqgBQye9hAyad" title="Introduction to Quantum Information Theory" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
          </div>
          <h4>Previous versions: </h4>
          <a href="https://www.youtube.com/watch?v=p-Z7GN7wyI4" target="_blank">COS 585 Spring 2022</a>
        </li>
        <br>
        <li>
          <h3>Quantum Money from Abelian Group Actions<br><span style="font-weight: normal;">(by Mark Zhandry)</span></h3>
          Given at <a href="https://qip2024.tw/" target="_blank">QIP 2024</a> as a substitute presenter.
          <div class="video-container" style="position: relative; width: 100%; height: 100%; padding-bottom: 56.25%;">
            <iframe style="position: absolute; width: 100%; height: 100%;" src="https://www.youtube.com/embed/a41RZ_pluBc?si=m182IxyCul37k11a" title="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
          </div>
        </li>
        <br>
        <li>
          <h3>Another Round of Breaking and Making Quantum Money: How to Not Build It from Lattices, and More <br><span style="font-weight: normal;">(by Jiahui Liu, Hart Montgomery, and Mark Zhandry)</span></h3>
          Given at <a href="https://eurocrypt.iacr.org/2023/" target="_blank">Eurocrypt 2023</a> as a substitute presenter.
          <div class="video-container" style="position: relative; width: 100%; height: 100%; padding-bottom: 56.25%;">
            <iframe style="position: absolute; width: 100%; height: 100%;" src="https://www.youtube.com/embed/3ay0dVg2kWY?si=FyKYKlEiGes1Wjs7&amp;start=1283" title="Another Round of Breaking and Making Quantum Money: How to Not Build It from Lattices, and More" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" allowfullscreen></iframe>
          </div>
        </li>
      </ul>
    </div>
    <div class="card" id="teaching">
      <h2>Teaching</h2>
      <ul>
        <li> <a href="https://www.cs.princeton.edu/courses/archive/spring24/cos585/" target="_blank"> Information Theory (COS 585) - Spring 2024 </a> (Guest Lecturer) </li>
        <li> <a href="https://www.cs.princeton.edu/courses/archive/spring22/cos585/" target="_blank"> Information Theory (COS 585) - Spring 2022 </a> (Graduate TA and Guest Lecturer) </li>
        <li> <a href="https://registrar.princeton.edu/course-offerings/course-details?term=1222&courseid=010006" target="_blank"> Quantum Computing (ELE 396 / COS 396) - Fall 2021 </a> (Graduate TA) </li>
        <li> <a href="https://www.cs.princeton.edu/~smattw/Teaching/cos445sp21.htm" target="_blank"> Economics and Computation (COS 445) - Spring 2021 </a> (Graduate TA) </li>
        <li> <a href="https://faculty.cc.gatech.edu/~ssingla7/courses/COS521.html" target="_blank"> Advanced Algorithm Design (COS 521) - Fall 2020 </a> (Graduate TA) </li>
        <li> <a href="https://mcgraw.princeton.edu/undergraduates/programs/digital-learning-lab" target="_blank">The Digital Learning Lab</a> of <a href="https://mcgraw.princeton.edu/" target="_blank"> The McGraw Center for Teaching and Learning </a> (Student Staff Consultant) </li>
      </ul>
    </div>
    <div class="card" id="service">
      <h2>Service</h2>
      <h3>Subreviews</h3>
      <div class="container">
        <div class="column">
          <p>
            FOCS 2023
          </p>
          <p>
            Asiacrypt 2023
          </p>
          <p>
            ITCS 2024
          </p>
          <p>
            Crypto 2024
          </p>
        </div>
        <div class="column">
          <p>
            TQC 2024
          </p>
          <p>
            TCC 2024
          </p>
          <p>
            Asiacrypt 2024
          </p>
        </div>
      </div>
      <h3>Other</h3>
      <p style="padding:20px">I am a co-founder and former core maintainer of <a href="https://www.tigerpath.io/" target="_blank" rel="noopener">TigerPath</a>, a web app now used by thousands of Princeton undergraduate students to plan their four-year schedules. It was written about in the <a href="https://www.dailyprincetonian.com/article/2018/09/tiger-path-app-debut" target="_blank" rel="noopener">Daily Princetonian</a>.</p> 
      <!-- <p>I am also a sometimes-contributor to the open source <a href="https://pytorch.org/" target="_blank" rel="noopener">PyTorch</a> machine learning framework. I&rsquo;ve refactored and written code for PyTorch&rsquo;s spatial transformer module, which is used in various applications in image registration, optical flow estimation, and other deep computer vision tasks.</p> -->
    </div>
    <div class="card" id="guide">
      <h2>Quantum Survival Guide</h2>
      <table style="border-collapse: separate;">
        <tr>
          <td style="padding-right: 40px; vertical-align: top;">
          </td>
          <td style="vertical-align: top; font-size: medium;">
            <p>
              Never build a quantum bridge. <br>
              Oh what a judgment lapse. <br>
              The slightest little measurement, <br>
              Would cause it to collapse. <br>
            </p>
            <p>
              And don't play quantum football, <br>
              Or at least do not be phased, <br>
              Since every interference <br>
              Runs the risk of being erased. <br>
            </p>
            <p>
              But you should also never, <br>
              Ever build a quantum car. <br>
              You check your speed and you'll indeed <br>
              Lose track of where you are. <br>
            </p>
            <p>
              And if you do, don't use it to commute <br>
              From there to here. <br>
              For if you commute spatially, <br>
              You'll surely disappear. <br>
            </p>
            <p>
              It's quite a risk of life and death. <br>
              Can you imagine that? <br>
              You'll find out what I mean <br>
              If you adopt a quantum cat. <br>
            </p>
            <p>
              And don't give birth to quantum kids. <br>
              The mess they'll bring about. <br>
              One moment they're inside the crib. <br>
              The next, they've tunneled out. <br>
            </p>
          </td>
          <td style="padding-right: 40px; vertical-align: top;">
          </td>
          <td style="vertical-align: top; font-size: medium;">
            <p>
              And if they're twins and fermions, <br>
              Oh what a chore you've got! <br>
              They'll never be in the same state. <br>
              If one's asleep, the other's not. <br>
            </p>
            <p>
              Don't write to quantum notebooks, <br>
              As it could be very sloppy. <br>
              You can't erase a single word, <br>
              Or even make a copy. <br>
            </p>
            <p>
              Don't make quantum decisions. <br>
              You'll have troubles big and small. <br>
              You'll do these things and others, <br>
              And you won't do them at all. <br>
            </p>
            <p>
              No quantum keys. <br>
              No quantum locks, <br>
              Or clocks or clouds or weather. <br>
              If I were in your shoes, <br>
              I would avoid these altogether. <br>
            </p>
            <p>
              The bottom line, be warned:  <br>
              If you don't want a quantum curse, <br>
              Avoid anything quantum <br>
              In our quantum universe. <br>
            </p>
          </td>
          <td style="padding-right: 40px; vertical-align: top;">
          </td>
        </tr>
        <tr>
          <td colspan="5" style="text-align: center; font-size: medium;">
            &mdash; Barak Nehoran
          </td>
        </tr>
      </table>
    </div>
    <div class="card" id="contact">
      <h2>Contact</h2>
      <p> I am very friendly, so feel free to reach out to me at <br> [<i>my_first_initial</i>][<i>last_name</i>]@princeton.edu </p> <!-- <form> -->
      <!--   <label for="name">Name:</label><br> -->
      <!--   <input type="text" id="name" name="name"><br> -->
      <!--   <label for="email">Email:</label><br> -->
      <!--   <input type="email" id="email" name="email"><br> -->
      <!--   <label for="message">Message:</label><br> -->
      <!--   <textarea id="message" name="message"></textarea><br> -->
      <!--   <input type="submit" value="Submit"> -->
      <!-- </form>  -->
    </div>
  </div>
  <script>
    // When the user scrolls the page, execute toggleSticky
    window.onscroll = function() {toggleSticky()};
    
    // Get the nav
    var nav = document.getElementById("nav");
    
    // Get the offset position of the navbar
    var sticky = nav.offsetTop;
    
    // Add the sticky class to the nav when you reach its scroll position. Remove  "sticky" when you leave the scroll position
    function toggleSticky() {
      if (window.pageYOffset > sticky) {
        nav.classList.add("sticky");
      } else {
        nav.classList.remove("sticky");
      }
    }

    async function fetchAsync (url) {
      try {
        let response = await fetch(url);
        let data = await response.json();
        console.log(data);
        return data;
      } catch (error) {
        return {
          papers: []
        }
      }
    }
    
    // Scrape publications, process them, and add them to the webpage
    async function updatePapers() {
      // Ad-hoc edits to be made to specific papers
      const paperEdits = {
        "fb9632a472ee891a716f49795122cba19e3d5c26": function(paper) {
          paper.title = "A Computational Separation Between Quantum No-Cloning and No-Telegraphing";
          paper.comment = "ðŸ“° Contributed talk at <a href=\"http://itcs-conf.org/\" target=\"_blank\">ITCS 2024</a> and <a href=\"https://indico.cern.ch/event/1175020/\" target=\"_blank\">QIP 2023</a>";
          paper.url = "https://drops.dagstuhl.de/entities/document/10.4230/LIPIcs.ITCS.2024.82";
          return paper;
        },
        "479b03654deeaae21805033c6bc8b76aa9b4448d": function(paper) {
          paper.comment = "ðŸ“° Contributed talk at <a href=\"https://crypto.iacr.org/2024/\" target=\"_blank\">Crypto 2024</a> and <a href=\"https://2024.qcrypt.net/\" target=\"_blank\">QCrypt 2024</a>";
          paper.url = "https://link.springer.com/chapter/10.1007/978-3-031-68394-7_3";
          return paper;
        },
        "9f1f192903b1d00483623600aa37fb514a9a6600": function(paper) {
          paper.title = "NEURD: automated proofreading and feature extraction for connectomics";
          return paper;
        },
        "8a6d8e170e052d6df5f09e0e7c7a026239b61492": function(paper) {
          paper.comment = "ðŸ“° Published in <a href=\"https://www.nature.com/articles/s41586-024-07558-y\" target=\"_blank\">Nature</a> (featured on the <a href=\"https://media.springernature.com/w440/springer-static/cover-hires/journal/41586/634/8032\" target=\"_blank\">cover</a> of the <a href=\"https://www.nature.com/nature/volumes/634/issues/8032\" target=\"_blank\">October 3, 2024 issue</a>)";
          paper.url = "https://www.nature.com/articles/s41586-024-07558-y";
          return paper;
        },
        "2bf223d27a98474a498337067ee842b657dbfceb": function(paper) {
          paper.comment = "ðŸ“° To appear in <a href=\"https://www.nature.com/\" target=\"_blank\">Nature</a>";
          paper.year = 2023;
          return paper;
        },
        "a641df4e738354237c2ba9cdb13c7dbca7d58171": function(paper) {
          paper.comment = "ðŸ“° Published in <a href=\"https://www.nature.com/articles/s41467-023-44354-0\" target=\"_blank\">Nature Communications</a>";
          paper.url = "https://www.nature.com/articles/s41467-023-44354-0";
          return paper;
        },
        "3149671f907078eac6835a05a99da756c493a15b": function(paper) {
          paper.comment = "ðŸ“° Published in <a href=\"https://www.nature.com/articles/s41592-021-01330-0\" target=\"_blank\">Nature Methods</a>";
          paper.url = "https://www.nature.com/articles/s41592-021-01330-0";
          return paper;
        },
        "c6dd3c889d46a09a07af4dbbe6f8980198071859": function(paper) {
          paper.comment = "ðŸ“° To appear in <a href=\"https://www.nature.com/\" target=\"_blank\">Nature</a>";
          return paper;
        },
        "293e98e1eb78383656a27d2774abb34130dba48b": function(paper) {
          paper.comment = "ðŸ“° To appear in <a href=\"https://www.nature.com/nmeth/\" target=\"_blank\">Nature Methods</a>";
          return paper;
        },
      };

      // List of duplicate papers to merge. Each paper identifier is a list of papers to be merged into that one 
      const paperMerges = {
        "fb9632a472ee891a716f49795122cba19e3d5c26": [ // A Computational Separation Between Quantum No-Cloning and No-Telegraphing
          "a410b5734ee9d821f5accc7a269d1efe5fc1577e",
        ],
        "3149671f907078eac6835a05a99da756c493a15b": [ // FlyWire: Online community for whole-brain connectomics
          "7d1824c61645371a977706ce860a678e3741a53f",
        ],
        "9f1f192903b1d00483623600aa37fb514a9a6600": [ // NEURD: automated proofreading and feature extraction for connectomics
          "c1bf00ba6d7d1d835ab02c102800a31288983711",
          "05765b193c2c7269cbb6b68ecd3a2078e710afe4",
          "d520a4e4e439d0b770f0fde7ee8da57934355d72",
        ],
        "8a6d8e170e052d6df5f09e0e7c7a026239b61492": [ // Neuronal wiring diagram of an adult brain 
          "1ec35fded5cec7758dd4a884477ccb7bb19662b6",
        ]
      };

      // Papers to skip
      const paperSkip = [
        "cbda3f294aba542a22d19b9a9926d5318a27ea66",
      ]

      // Papers to bring to the top
      const paperEmph = [
        "8a6d8e170e052d6df5f09e0e7c7a026239b61492",
        "2bf223d27a98474a498337067ee842b657dbfceb",
        "c6dd3c889d46a09a07af4dbbe6f8980198071859",
      ];
  
      var papers = document.getElementById("papers");

      var papjson;
      if (window.location.hostname.endsWith('assets.github.dev')) {
        console.log('Skipped loading papers in development environment');
        papjson = await fetchAsync("https://raw.githubusercontent.com/bnehoran/bnehoran.github.io/dev_papers/papers.json");
      } else {
        console.log('Loading papers...');
        papjson = await fetchAsync("https://api.semanticscholar.org/graph/v1/author/1926235266?fields=papers,papers.title,papers.url,papers.authors,papers.year,papers.citationCount,papers.abstract,papers.venue,papers.publicationVenue,papers.fieldsOfStudy,papers.publicationDate");
      }
      if (papjson.papers.length === 0) {
        papers.innerHTML = "<p>Loading publications failed. See my profile on <a href='https://scholar.google.com/citations?user=DMxcDioAAAAJ' target='_blank'>Google Scholar</a>.</p>";
        return;
      }

      // Custom sorting of papers by category and emphasis
      var fieldvalues = {
        "Computer Science": 0,
        "Biology": 1,
        "Medicine": 1,
      }
      papjson.papers.sort((a, b) => {
        // Place Biology papers at the end of the list (to emphasize CS/Physics papers)
        if (!('fieldsOfStudy' in a) || !('fieldsOfStudy' in b) || !(Array.isArray(a.fieldsOfStudy)) || !(Array.isArray(b.fieldsOfStudy))) {
          return 0;
        }
        a.val = a.fieldsOfStudy.reduce((acc, item) => acc || (fieldvalues[item] || 0), 0);
        b.val = b.fieldsOfStudy.reduce((acc, item) => acc || (fieldvalues[item] || 0), 0);
        if (a.val != b.val) {
          return a.val - b.val;
        }
        
        if ((paperEmph.includes(a.paperId)) && !(paperEmph.includes(b.paperId))) {
          return -1;
        }
        if (!(paperEmph.includes(a.paperId)) && (paperEmph.includes(b.paperId))) {
          return 1;
        }
        if ((paperEmph.includes(a.paperId)) && (paperEmph.includes(b.paperId))) {
          return paperEmph.indexOf(a.paperId) - paperEmph.indexOf(b.paperId);
        }
        return 0;
      });

      // Merge duplicate papers
      papLookup = {};
      for (pap of papjson.papers) {
        papLookup[pap.paperId] = pap;
      }
      for (id of Object.keys(paperMerges)) {
        citCount = papLookup[id].citationCount;
        for (subId of paperMerges[id]) {
          if (subId in papLookup) {
            if ('citationCount' in papLookup[subId]) {
              citCount += papLookup[subId].citationCount;  // Add in the citations of the duplicate
            }
            papLookup[subId].skip = true;  // Skip the duplicate paper
          }
        }
        papLookup[id].citationCount = citCount;
      }

      // Skip papers
      for (id of paperSkip) {
        if (id in papLookup) {
          papLookup[id].skip = true;
        }
      }
      
      var first = true;
      for (pap of papjson.papers) {
        console.log(pap);

        // Apply ad-hoc edits to papers
        if (pap.paperId in paperEdits) {
          pap = paperEdits[pap.paperId](pap);
        }
        
        // Drop certain papers from display (for example, duplicates)
        if ("skip" in pap) {
          continue;
        }

        // The default state for the list items: collapsed/expanded
        var defaultState = "expanded";

        var litem = document.createElement("li");
        litem.classList.add("collapsible");
        
        var header = document.createElement("div");
        header.classList.add("collapsible-header", defaultState);
        header.innerHTML = "<a href=\"" + pap.url + "\" target=\"_blank\">" + pap.title +"</a>" + " (" + pap.year + ")";
        // header.innerHTML = "<u><b>" + pap.title + "</b></u> (" + pap.year + ")";
        litem.appendChild(header);

        var content = document.createElement("div");
        content.classList.add("collapse-section", defaultState);

        const numAutDisp = 5;
        var authorNames = pap.authors.map(a => (a.name === "Barak Nehoran") || (a.name === "B. Nehoran") ? "<b>Barak Nehoran</b>" : a.name);
        content.innerHTML += authorNames[0];
        for (aut of authorNames.slice(1, numAutDisp)) {
          content.innerHTML += ", " + aut;
        }
        if (pap.authors.length > numAutDisp) {
          content.innerHTML += ", et al. "
          if (!(authorNames.slice(0, numAutDisp).includes("<b>Barak Nehoran</b>"))) {
              content.innerHTML += "including <b>Barak Nehoran</b>";
          }
        }

        if ("comment" in pap) {
            content.innerHTML += "<br>";
            content.innerHTML += pap.comment;
        }

        content.innerHTML += "<br>";
        if (pap.citationCount === 1) {
          content.innerHTML += "[" + pap.citationCount + " citation]";
        }
        else if (pap.citationCount > 1) {
          content.innerHTML += "[" + pap.citationCount + " citations]";
        }

        // In development only, show the paper ID
        if (window.location.hostname.endsWith('assets.github.dev')) {
            // content.innerHTML += "<br>";
            content.innerHTML += "&nbsp;&nbsp;<span style='font-size: 0.5em; color: gray;'>" + pap.paperId + "</span>";
        }

        litem.appendChild(content);
        header.addEventListener('click', function() {
          this.classList.toggle('collapsed');
          this.classList.toggle('expanded');
          var parentLi = this.parentNode;
          var content = parentLi.querySelector('.collapse-section');
          content.classList.toggle('collapsed');
          content.classList.toggle('expanded');
        });

        if (first) {
          // clear the loader before adding the first paper
          papers.innerHTML = "";
          first = false;
        }
        papers.appendChild(litem);
      }
    }
    
    updatePapers();
    
  </script>
</body>

</html>
